/*
* JS Redirection Mobile
*
* Developed by
* Sebastiano Armeli-Battana (@sebarmeli) - http://www.sebastianoarmelibattana.com
* Dual licensed under the MIT or GPL Version 3 licenses.
* @version 0.9.5
*/
if(!window.SA){window.SA={}}SA.redirection_mobile=function(a){var b=function(a){var b=new Date;b.setTime(b.getTime()+a);return b};var c=function(a){if(!a){return false}var b=document.location.search,c=b&&b.substring(1).split("&"),d=0,e=c.length;for(;d<e;d++){var f=c[d],g=f&&f.substring(0,f.indexOf("="));if(g===a){return f.substring(f.indexOf("=")+1,f.length)}}return false};var d=navigator.userAgent.toLowerCase(),e="false",f="true",g=a||{},h=g.noredirection_param||"noredirection",i=g.mobile_prefix||"m",j=g.mobile_url,k=g.mobile_scheme?g.mobile_scheme+":":document.location.protocol,l=document.location.host,m=c(h),n=j||i+"."+(!!l.match(/^www\./i)?l.substring(4):l),o=g.cookie_hours||1,p=g.keep_path||false,q=g.keep_query||false,r=g.tablet_url||n,s=!!d.match(/(iPhone|iPod|blackberry|android 0.5|htc|lg|midp|mmp|mobile|nokia|opera mini|palm|pocket|psp|sgh|smartphone|symbian|treo mini|Playstation Portable|SonyEricsson|Samsung|MobileExplorer|PalmSource|Benq|Windows Phone|Windows Mobile|IEMobile|Windows CE|Nintendo Wii)/i);if(document.referrer.indexOf(n)>=0||m===f){if(window.sessionStorage){window.sessionStorage.setItem(h,f)}else{document.cookie=h+"="+f+";expires="+b(3600*1e3*o).toUTCString()}}else if(m===e){if(window.sessionStorage){window.sessionStorage.removeItem(h)}else{document.cookie=h+"="+f+";expires=Thu, 01-Jan-1970 00:00:01 GMT"}}var t=window.sessionStorage?window.sessionStorage.getItem(h)===f:false,u=document.cookie?document.cookie.indexOf(h)>=0:false;if(!!d.match(/(iPad|SCH-I800|xoom|kindle)/i)){var v=g.tablet_redirection===f||!!g.tablet_url?true:false;s=false}if((v||s)&&!(u||t)){if(g.beforeredirection_callback){if(!g.beforeredirection_callback.call(this)){return}}var w="";if(p){w+=document.location.pathname}if(q){w+=document.location.search}if(v){document.location.href=k+"//"+r+w;return"tablet"}else if(s){document.location.href=k+"//"+n+w;return"mobile"}}return"desktop"}